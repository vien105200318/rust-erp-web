<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust Discord Clone</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        discord: {
                            dark: '#313338', sidebar: '#2b2d31', server: '#1e1f22', input: '#383a40',
                            hover: '#35373c', active: '#404249', brand: '#5865f2', brandHover: '#4752c4',
                            danger: '#da373c', text: '#dbdee1', header: '#f2f3f5', muted: '#949ba4', green: '#23a559'
                        }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="/assets/style.css">
</head>
<body class="bg-discord-dark text-discord-text font-sans h-screen overflow-hidden select-none">

<div id="auth-screen" class="fixed inset-0 flex items-center justify-center bg-[url('https://cdn.discordapp.com/attachments/886982703673733150/1144275990267793508/bg.png')] bg-cover">
    <div class="bg-discord-dark p-8 rounded-md shadow-2xl w-full max-w-md text-center transform transition-all scale-100">
        <h2 class="text-2xl font-bold text-discord-header mb-2 auth-header">Chào mừng trở lại!</h2>
        <p class="text-discord-muted mb-6 auth-sub">Rất vui được gặp lại bạn!</p>

        <div class="text-left mb-4">
            <label class="block text-xs font-bold text-discord-muted uppercase mb-2">Username</label>
            <input type="text" id="username" class="w-full p-2.5 bg-discord-server text-white rounded focus:outline-none focus:ring-2 focus:ring-discord-brand transition-all">
        </div>

        <div class="text-left mb-6">
            <label class="block text-xs font-bold text-discord-muted uppercase mb-2">Mật khẩu</label>
            <input type="password" id="password" class="w-full p-2.5 bg-discord-server text-white rounded focus:outline-none focus:ring-2 focus:ring-discord-brand transition-all">
        </div>

        <button onclick="handleAuth()" id="btn-submit" class="w-full bg-discord-brand hover:bg-discord-brandHover text-white font-bold py-3 rounded transition-colors duration-200">Đăng Nhập</button>
        <div class="mt-4 text-sm text-sky-500 cursor-pointer hover:underline" onclick="toggleMode()">Cần một tài khoản? Đăng ký</div>
        <p id="error-msg" class="text-discord-danger text-sm mt-3"></p>
    </div>
</div>

<div id="app-screen" class="hidden w-full h-full flex">
    <div class="w-60 bg-discord-sidebar flex flex-col min-w-[240px]">
        <div class="h-12 px-4 flex items-center justify-between shadow-sm border-b border-black/10 hover:bg-discord-hover cursor-pointer transition-colors">
            <span class="font-bold text-discord-header truncate">Rust Server</span><i class="fa-solid fa-chevron-down text-xs"></i>
        </div>
        <div class="flex-1 overflow-y-auto p-2 space-y-0.5" id="channel-list-container"></div>
        <div class="bg-[#232428] p-2 flex items-center justify-between">
            <div class="flex items-center p-1 rounded hover:bg-discord-hover cursor-pointer group">
                <div class="relative"><img id="my-avatar" class="w-8 h-8 rounded-full bg-gray-500"><div class="absolute bottom-0 right-0 w-3 h-3 bg-discord-green rounded-full border-2 border-[#232428]"></div></div>
                <div class="ml-2"><div id="my-username" class="text-xs font-bold text-white group-hover:text-gray-100">User</div><div class="text-[10px] text-discord-muted">Online</div></div>
            </div>
            <div class="flex gap-1">
                <button class="p-2 rounded hover:bg-discord-hover text-discord-text"><i class="fa-solid fa-microphone-slash text-xs"></i></button>
                <button id="btn-deafen" onclick="toggleMute()" class="p-2 rounded hover:bg-discord-hover text-discord-text"><i class="fa-solid fa-headphones text-xs"></i></button>
                <button onclick="logout()" class="p-2 rounded hover:bg-discord-hover text-discord-danger"><i class="fa-solid fa-power-off text-xs"></i></button>
            </div>
        </div>
    </div>

    <div class="flex-1 flex flex-col bg-discord-dark min-w-0">
        <div class="h-12 px-4 flex items-center justify-between border-b border-black/20 shadow-sm">
            <div class="flex items-center gap-2 text-discord-header font-bold text-base"><i id="header-icon" class="fa-solid fa-hashtag text-discord-muted text-xl"></i><span id="current-target-name">general</span></div>
            <div class="flex items-center gap-4 text-discord-muted text-xl">
                <i class="fa-solid fa-phone cursor-pointer hover:text-discord-text"></i><i class="fa-solid fa-video cursor-pointer hover:text-discord-text"></i><i class="fa-solid fa-users cursor-pointer hover:text-discord-text text-discord-text"></i>
                <div class="hidden md:flex bg-discord-server px-2 py-1 rounded text-xs items-center gap-2 w-36 transition-all focus-within:w-48"><input type="text" placeholder="Search" class="bg-transparent border-none outline-none text-discord-text w-full"><i class="fa-solid fa-magnifying-glass"></i></div>
            </div>
        </div>
        <div id="chat-container" class="flex-1 overflow-y-auto px-4 py-4 flex flex-col gap-1 scroll-smooth"></div>
        <div id="typing-indicator" class="h-6 px-4 text-xs font-bold text-discord-muted flex items-center gap-1"></div>
        <div class="px-4 pb-6 pt-2">
            <div class="bg-discord-input rounded-lg flex items-center px-4 py-2.5 gap-3">
                <button class="text-discord-muted hover:text-discord-text"><i class="fa-solid fa-circle-plus text-2xl"></i></button>
                <input type="text" id="msgInput" class="flex-1 bg-transparent border-none outline-none text-discord-text placeholder-discord-muted" placeholder="Nhắn tin cho #general" onkeydown="handleKeyDown(event)" oninput="handleInput()">
                <div class="flex items-center gap-3 text-discord-muted text-xl"><i class="fa-solid fa-gift cursor-pointer hover:text-discord-text"></i><i class="fa-solid fa-note-sticky cursor-pointer hover:text-discord-text"></i><i class="fa-solid fa-face-smile cursor-pointer hover:text-discord-brandHover"></i></div>
            </div>
        </div>
    </div>

    <div class="w-60 bg-discord-sidebar p-3 hidden lg:flex flex-col">
        <h3 class="text-xs font-bold text-discord-muted uppercase mb-2 px-2">Online</h3>
        <div id="members-container" class="flex-1 overflow-y-auto space-y-0.5"></div>
    </div>
</div>

<script src="/assets/script.js"></script>
</body>
</html>